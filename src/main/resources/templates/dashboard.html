<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Hospital - Dashboard Admin</title>

    <!-- External CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="logo">
            <i class="fas fa-hospital"></i>
            <span>Smart Hospital</span>
        </div>
        <button class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <div class="sidebar-menu">
        <div class="menu-section">
            <h4>Kryesore</h4>
            <ul>
                <li class="menu-item active" data-section="dashboard">
                    <a href="#dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="menu-section">
            <h4>Menaxhimi</h4>
            <ul>
                <li class="menu-item" data-section="doctors">
                    <a href="#doctors">
                        <i class="fas fa-user-md"></i>
                        <span>Doktorë</span>
                    </a>
                </li>
                <li class="menu-item" data-section="nurses">
                    <a href="#nurses">
                        <i class="fas fa-user-nurse"></i>
                        <span>Infermierë</span>
                    </a>
                </li>
                <li class="menu-item" data-section="patients">
                    <a href="#patients">
                        <i class="fas fa-procedures"></i>
                        <span>Pacientë</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="menu-section">
            <h4>Sistemi</h4>
            <ul>
                <li class="menu-item" data-section="settings">
                    <a href="#settings">
                        <i class="fas fa-cog"></i>
                        <span>Cilësimet</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="sidebar-footer">
        <div class="user-info">
            <div class="user-avatar">
                <i class="fas fa-user-shield"></i>
            </div>
            <div class="user-details">
                <span class="user-name" id="adminName">Admin</span>
                <span class="user-role">Administrator</span>
            </div>
        </div>
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Dil</span>
        </button>
    </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-left">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <h1 id="pageTitle">Dashboard</h1>
        </div>

        <div class="top-bar-right">
            <button class="btn btn-primary" onclick="refreshData()">
                <i class="fas fa-sync-alt"></i>
                <span class="hide-mobile">Rifresko</span>
            </button>

            <div class="user-menu">
                <button class="user-menu-btn" onclick="toggleUserMenu()">
                    <i class="fas fa-user-shield"></i>
                    <span id="topBarAdminName">Admin</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="user-menu-dropdown" id="userMenuDropdown">
                    <a href="#profile" onclick="showProfile()">
                        <i class="fas fa-user"></i> Profili
                    </a>
                    <a href="#settings" onclick="showSection('settings')">
                        <i class="fas fa-cog"></i> Cilësimet
                    </a>
                    <hr>
                    <a href="#logout" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Dil nga sistemi
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
        <!-- Alert Messages -->
        <div id="successAlert" class="alert success">
            <i class="fas fa-check-circle"></i>
            <span id="successMessage"></span>
            <button class="alert-close" onclick="hideAlert('successAlert')">&times;</button>
        </div>

        <div id="errorAlert" class="alert error">
            <i class="fas fa-exclamation-circle"></i>
            <span id="errorMessage"></span>
            <button class="alert-close" onclick="hideAlert('errorAlert')">&times;</button>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section active">
            <div class="page-header">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard Kryesor</h2>
                <p>Përmbledhje e aktivitetit të spitalit</p>
            </div>

            <!-- Statistics Cards -->
            <div class="stats-grid">
                <div class="stat-card doctors">
                    <div class="stat-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="dashboardDoctorCount">0</div>
                        <div class="stat-label">Doktorë të Regjistruar</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> +2 këtë muaj
                        </div>
                    </div>
                </div>

                <div class="stat-card nurses">
                    <div class="stat-icon">
                        <i class="fas fa-user-nurse"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="dashboardNurseCount">0</div>
                        <div class="stat-label">Infermierë të Regjistruar</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> +5 këtë muaj
                        </div>
                    </div>
                </div>

                <div class="stat-card patients">
                    <div class="stat-icon">
                        <i class="fas fa-procedures"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="dashboardPatientCount">0</div>
                        <div class="stat-label">Pacientë të Regjistruar</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> +12 këtë muaj
                        </div>
                    </div>
                </div>

                <div class="stat-card appointments">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">156</div>
                        <div class="stat-label">Takime Sot</div>
                        <div class="stat-change neutral">
                            <i class="fas fa-minus"></i> E njëjtë me dje
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3><i class="fas fa-bolt"></i> Veprime të Shpejta</h3>
                <div class="actions-grid">
                    <button class="action-card" onclick="showSection('doctors')">
                        <i class="fas fa-user-md"></i>
                        <span>Shto Doktor</span>
                    </button>
                    <button class="action-card" onclick="showSection('nurses')">
                        <i class="fas fa-user-nurse"></i>
                        <span>Shto Infermier</span>
                    </button>
                    <button class="action-card" onclick="showSection('patients')">
                        <i class="fas fa-procedures"></i>
                        <span>Shto Pacient</span>
                    </button>
                    <button class="action-card" onclick="generateReport()">
                        <i class="fas fa-chart-bar"></i>
                        <span>Gjenero Raport</span>
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h3><i class="fas fa-clock"></i> Aktivitetet e Fundit</h3>
                <div class="activity-list" id="activityList">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="activity-content">
                            <span class="activity-text">U shtua doktor i ri: Dr. Alban Krasniqi</span>
                            <span class="activity-time">2 orë më parë</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-user-nurse"></i>
                        </div>
                        <div class="activity-content">
                            <span class="activity-text">U regjistrua infermiere e re: Albana Hoxha</span>
                            <span class="activity-time">4 orë më parë</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-procedures"></i>
                        </div>
                        <div class="activity-content">
                            <span class="activity-text">U shtua pacient i ri në sistem</span>
                            <span class="activity-time">6 orë më parë</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Doctors Section -->
        <div id="doctors" class="section">
            <div class="page-header">
                <h2><i class="fas fa-user-md"></i> Menaxhimi i Doktorëve</h2>
                <button class="btn btn-success" onclick="showAddDoctorForm()">
                    <i class="fas fa-plus"></i> Shto Doktor të Ri
                </button>
            </div>

            <div class="section-content">
                <div class="loading-spinner" id="doctorsLoading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Duke ngarkuar doktorët...</span>
                </div>

                <div class="table-container">
                    <table class="data-table" id="doctorsTable">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Emri</th>
                            <th>Mbiemri</th>
                            <th>Email</th>
                            <th>Specializimi</th>
                            <th>Veprime</th>
                        </tr>
                        </thead>
                        <tbody id="doctorsTableBody">
                        <!-- Data do të ngarkohet dinamikisht -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Nurses Section -->
        <div id="nurses" class="section">
            <div class="page-header">
                <h2><i class="fas fa-user-nurse"></i> Menaxhimi i Infermierëve</h2>
                <button class="btn btn-success" onclick="showAddNurseForm()">
                    <i class="fas fa-plus"></i> Shto Infermier të Ri
                </button>
            </div>

            <div class="section-content">
                <div class="loading-spinner" id="nursesLoading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Duke ngarkuar infermierët...</span>
                </div>

                <div class="table-container">
                    <table class="data-table" id="nursesTable">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Emri</th>
                            <th>Mbiemri</th>
                            <th>Email</th>
                            <th>Veprime</th>
                        </tr>
                        </thead>
                        <tbody id="nursesTableBody">
                        <!-- Data do të ngarkohet dinamikisht -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Patients Section -->
        <div id="patients" class="section">
            <div class="page-header">
                <h2><i class="fas fa-procedures"></i> Menaxhimi i Pacientëve</h2>
                <button class="btn btn-success" onclick="showAddPatientForm()">
                    <i class="fas fa-plus"></i> Shto Pacient të Ri
                </button>
            </div>

            <div class="section-content">
                <div class="loading-spinner" id="patientsLoading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Duke ngarkuar pacientët...</span>
                </div>

                <div class="table-container">
                    <table class="data-table" id="patientsTable">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Emri</th>
                            <th>Mbiemri</th>
                            <th>Email</th>
                            <th>Data e Lindjes</th>
                            <th>Gjinia</th>
                            <th>Veprime</th>
                        </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                        <!-- Data do të ngarkohet dinamikisht -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="section">
            <div class="page-header">
                <h2><i class="fas fa-cog"></i> Cilësimet e Sistemit</h2>
            </div>

            <div class="settings-content">
                <div class="settings-card">
                    <h3><i class="fas fa-user-shield"></i> Profili i Admin-it</h3>
                    <form id="profileForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Emri i Plotë</label>
                                <input type="text" id="profileName" value="">
                            </div>
                            <div class="form-group">
                                <label>Username</label>
                                <input type="text" id="profileUsername" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="profileEmail" value="">
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Ruaj Ndryshimet
                        </button>
                    </form>
                </div>

                <div class="settings-card">
                    <h3><i class="fas fa-key"></i> Ndrysho Fjalëkalimin</h3>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label>Fjalëkalimi Aktual</label>
                            <input type="password" id="currentPassword">
                        </div>
                        <div class="form-group">
                            <label>Fjalëkalimi i Ri</label>
                            <input type="password" id="newPassword">
                        </div>
                        <div class="form-group">
                            <label>Konfirmo Fjalëkalimin e Ri</label>
                            <input type="password" id="confirmNewPassword">
                        </div>
                        <button type="submit" class="btn btn-warning">
                            <i class="fas fa-key"></i> Ndrysho Fjalëkalimin
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add/Edit Modals -->
<div id="addEditModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Shto të Dhëna</h3>
            <button class="close" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="addEditForm">
                <div id="formFields">
                    <!-- Fields do të krijohen dinamikisht -->
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-warning" onclick="closeModal()">Anulo</button>
            <button type="submit" form="ad